@model PostDetailViewModel
@{
    var detail = Model.Post.Detail;
    var categoryUrl = "/category/" + detail.Category.Slug;
}

@section scripts
{
    <script src="~/lib/mustache.js/mustache.min.js"></script>
    <script src="~/js/controllers/posts.controller.js" asp-append-version="true"></script>
    <script>
        let controller = new postsController();
        controller.initialize();
    </script>
}

<input type="hidden" id="hid_post_id" value="@detail.Id"/>

<div class="container single-content">
<div class="entry-header pt-80 pb-30 mb-20">
    <div class="row">
        <div class="col-md-6 mb-md-0 mb-sm-3">
            <figure class="mb-0 mt-lg-0 mt-3 border-radius-5">
                <img class=" border-radius-5" src="~/imgs/news/news-8.jpg" alt="">
            </figure>
        </div>
        <div class="col-md-6 align-self-center">
            <div class="post-content">
                <div class="entry-meta meta-0 mb-15 font-small">
                    <a href="@categoryUrl">
                        <span class="post-cat position-relative @detail.Category.Color">@detail.Category.Name</span>
                    </a>
                </div>
                <h1 class="entry-title mb-30 font-weight-900">
                    @detail.Title
                </h1>
                <p class="excerpt mb-30">
                    @detail.Summary
                </p>
                <div class="entry-meta align-items-center meta-2 font-small color-muted">
                    @if (detail.User != null)
                    {
                        <p class="mb-5">
                            <a class="author-avatar" href="#">
                                <img class="img-circle" src="~/imgs/authors/author-3.jpg" alt="">
                            </a>
                            By
                            <a href="author.html">
                                <span class="author-name font-weight-bold">@detail.User.FullName</span>
                            </a>
                        </p>
                    }
                    <span class="mr-10">@(detail.PublishedDate.HasValue ? detail.PublishedDate.Value.ToString("dd MMMM", CultureInfo.InvariantCulture) : "--")</span>
                    <span class="has-dot"> 8 mins read</span>
                </div>
            </div>
        </div>
    </div>
</div>
<!--end single header-->
<!--figure-->

<article class="entry-wraper mb-50">
    <div class="excerpt mb-30">
        <p>Gosh jaguar ostrich quail one excited dear hello and bound and the and bland moral misheard roadrunner flapped lynx far that and jeepers giggled far and far bald that roadrunner python inside held shrewdly the manatee.</p>
    </div>
    <div class="entry-main-content dropcap">
        <p>Fretful human far recklessly while caterpillar well a well blubbered added one a some far whispered rampantly whispered while irksome far clung irrespective wailed more rosily and where saluted while black dear so yikes as considering recast to some crass until.</p>
        <hr class="wp-block-separator is-style-dots">
        <p>Thanks sniffed in hello after in foolhardy and some far purposefully much one at the much conjointly leapt skimpily that quail sheep some goodness <a href="#">nightingale</a> the instead exited expedient up far ouch mellifluous altruistic and and lighted more instead much when ferret but the.</p>
        <figure class="wp-block-gallery columns-3 wp-block-image">
            <ul class="blocks-gallery-grid">
                <li class="blocks-gallery-item">
                    <a href="#">
                        <img class="border-radius-5" src="~/imgs/news/thumb-6.jpg" alt="">
                    </a>
                </li>
                <li class="blocks-gallery-item">
                    <a href="#">
                        <img class="border-radius-5" src="~/imgs/news/thumb-7.jpg" alt="">
                    </a>
                </li>
                <li class="blocks-gallery-item">
                    <a href="#">
                        <img class="border-radius-5" src="~/imgs/news/thumb-8.jpg" alt="">
                    </a>
                </li>
            </ul>
            <figcaption> <i class="ti-credit-card mr-5"></i>Image credit: Pexel </figcaption>
        </figure>
        <hr class="section-divider">
        <p>
            Yet more some certainly yet alas abandonedly whispered <a href="#">intriguingly</a>
            <sup>
                <a href="#">[2]</a>
            </sup> well extensive one howled talkative admonishingly below a rethought overlaid dear gosh activated less <a href="#">however</a> hawk yet oh scratched ostrich some outside crud irrespective lightheartedly and much far amenably that the elephant since when.
        </p>
        <h2>The Guitar Legends</h2>
        <p>
            Furrowed this in the upset <a href="#">some across</a>
            <sup>
                <a href="#">[3]</a>
            </sup> tiger oh loaded house gosh whispered <a href="#">faltering alas</a>
            <sup>
                <a href="#">[4]</a>
            </sup> ouch cuckoo coward in scratched undid together bit fumblingly so besides salamander heron during the jeepers hello fitting jauntily much smoothly globefish darn blessedly far so along bluebird leopard and.
        </p>
        <blockquote>
            <p>
                Integer eu faucibus <a href="#">dolor</a>
                <sup>
                    <a href="#">[5]</a>
                </sup>. Ut venenatis tincidunt diam elementum imperdiet. Etiam accumsan semper nisl eu congue. Sed aliquam magna erat, ac eleifend lacus rhoncus in.
            </p>
        </blockquote>
        <p>Fretful human far recklessly while caterpillar well a well blubbered added one a some far whispered rampantly whispered while irksome far clung irrespective wailed more rosily and where saluted while black dear so yikes as considering recast to some crass until cow much less and rakishly overdrew consistent for by responsible oh one hypocritical less bastard hey oversaw zebra browbeat a well.</p>
        <h3>Getting Crypto Rich</h3>
        <hr class="wp-block-separator is-style-wide">
        <div class="wp-block-image">
            <figure class="alignleft is-resized">
                <img class="border-radius-5" src="~/imgs/news/thumb-11.jpg">
                <figcaption> And far contrary smoked some contrary among stealthy </figcaption>
            </figure>
        </div>
        <p>And far contrary smoked some contrary among stealthy engagingly suspiciously a cockatoo far circa sank dully lewd slick cracked llama the much gecko yikes more squirrel sniffed this and the the much within uninhibited this abominable a blubbered overdid foresaw through alas the pessimistic.</p>
        <p>Gosh jaguar ostrich quail one excited dear hello and bound and the and bland moral misheard roadrunner flapped lynx far that and jeepers giggled far and far bald that roadrunner python inside held shrewdly the manatee.</p>
        <hr class="section-divider">
        <p>Thanks sniffed in hello after in foolhardy and some far purposefully much one at the much conjointly leapt skimpily that quail sheep some goodness nightingale the instead exited expedient up far ouch mellifluous altruistic and and lighted more instead much when ferret but the.</p>
        <!--Begin Subcrible-->
        <div class="border-radius-10 border bg-white mb-30 p-30">
            <div class="row justify-content-between">
                <div class="col-md-5 mb-2 mb-md-0">
                    <h5 class="font-weight-bold secondfont mb-30 mt-0">Become a member</h5>
                    <p class="font-small">Get the latest news right in your inbox. We never spam!</p>
                </div>
                <div class="col-md-7">
                    <div class="row">
                        <div class="col-md-12">
                            <input type="text" class="form-control" placeholder="Enter your e-mail address">
                        </div>
                        <div class="col-md-12 mt-2">
                            <button type="submit" class="btn btn-primary btn-block">Subscribe</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--End Subcrible-->
        <p>Yet more some certainly yet alas abandonedly whispered intriguingly well extensive one howled talkative admonishingly below a rethought overlaid dear gosh activated less however hawk yet oh scratched ostrich some outside crud irrespective lightheartedly and much far amenably that the elephant since when.</p>
    </div>
    <!-- Tags -->
    <div class="entry-bottom mt-50 mb-30">
        <div class="tags">
            <span>Tags: </span>
            @if (detail.Tags != null && detail.Tags.Count != 0)
            {
                @foreach (var item in detail.Tags)
                {
                    var tagUrl = "/tag/" + item.Slug;
                    <a href="@tagUrl" rel="tag">@item.Name</a>
                }
            }
        </div>
    </div>
    <div class="single-social-share clearfix">
        <div class="entry-meta meta-1 font-small color-grey float-start mt-10">
            <span class="hit-count mr-15"><i class="elegant-icon icon_comment_alt mr-5"></i>182 comments</span>
            <span class="hit-count mr-15"><i class="elegant-icon icon_like mr-5"></i>268 likes</span>
            <span class="hit-count"><i class="elegant-icon icon_star-half_alt mr-5"></i>Rate: 9/10</span>
        </div>
    </div>
    <!--author box-->
    <div class="author-bio p-30 mt-50 border-radius-10 bg-white">
        @if (detail.User != null)
        {
            <div class="author-image mb-30">
                <a href="author.html">
                    <img src="~/imgs/authors/author-3.jpg" alt="" class="avatar">
                </a>
            </div>
            <div class="author-info">
                <h4 class="font-weight-bold mb-20">
                    <span class="vcard author">
                        <span class="fn">
                            <a href="author.html" title="Posted by @detail.User.FullName" rel="author">@detail.User.FullName</a>
                        </span>
                    </span>
                </h4>
                <h5 class="text-muted">About author</h5>
                <div class="author-description text-muted">You should write because you love the shape of stories and sentences and the creation of different words on a page. </div>
                <a href="author.html" class="author-bio-link mb-md-0 mb-3">View all posts (125)</a>
                <div class="author-social">
                    <ul class="author-social-icons">
                        <li class="author-social-link-facebook">
                            <a href="#" target="_blank">
                                <i class="ti-facebook"></i>
                            </a>
                        </li>
                        <li class="author-social-link-twitter">
                            <a href="#" target="_blank">
                                <i class="ti-twitter-alt"></i>
                            </a>
                        </li>
                        <li class="author-social-link-pinterest">
                            <a href="#" target="_blank">
                                <i class="ti-pinterest"></i>
                            </a>
                        </li>
                        <li class="author-social-link-instagram">
                            <a href="#" target="_blank">
                                <i class="ti-instagram"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        }
    </div>
    <!--related posts-->
    @await Html.PartialAsync("Partials/Posts/_RelatedPosts")

    <!--More posts-->
    @await Html.PartialAsync("Partials/Posts/_MorePosts")

    <!--Comments-->
    <div class="comments-area">
        <div class="widget-header-2 position-relative mb-30">
            <h5 class="mt-5 mb-30">Comments</h5>
        </div>
        <ul class="comments" id="comment_list">
            <!-- comment item sẽ được render bởi JavaScript -->
        </ul>
    </div>

    <!--comment form-->
    <div class="comment-form">
        <div class="widget-header-2 position-relative mb-30">
            <h5 class="mt-5 mb-30">Leave a Reply</h5>
        </div>
        @if (User.Identity is { IsAuthenticated: true })
        {
            <form class="form-contact comment_form" action="/posts/addNewComment" id="commentForm">
                <input type="hidden" name="postId" value="@detail.Id"/>
                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <textarea class="form-control w-100" name="comment" id="txt_new_comment_content" cols="30" rows="9" placeholder="Write Comment"></textarea>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <button type="submit" name="submit" id="btn_send_comment" class="btn button button-contactForm">Post Comment</button>
                </div>
            </form>
        }
        else
        {
            <h4 class="section-title">Please <a asp-action="Login" asp-controller="Accounts">log in </a>to comment</h4>
        }
    </div>
</article>
</div>
<!--container-->